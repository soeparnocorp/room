<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>READTalk â€” Room</title>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #fff; color: #000; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; }

  h1 { font-size: 28px; margin-bottom: 24px; }

  .btn { padding: 14px 24px; background: #ff0000; color: #fff; font-weight: 600; border: none; border-radius: 12px; cursor: pointer; font-size: 16px; }
  .btn:hover { background: #e60000; }
</style>
</head>
<body>

  <h1>Selamat Datang di READTalk</h1>
  <button class="btn" onclick="startChat()">Mulai Chat Baru</button>

<script>
async function startChat() {
  try {
    // panggil endpoint Worker / DO untuk create room baru
    const res = await fetch('/api/create-room', { method: 'POST' });
    if (!res.ok) throw new Error('Gagal membuat room baru');
    const data = await res.json();
    const roomId = data.roomId;

    // redirect ke chat.html dengan roomId dari DO
    window.location.href = 'chat.html?room=' + roomId;
  } catch(err) {
    console.error(err);
    alert('Gagal memulai chat baru, coba lagi');
  }
}
</script>

</body>
</html>
